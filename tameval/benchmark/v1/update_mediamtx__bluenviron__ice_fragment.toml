[meta]
task = "update"
scenario = "update_test"

[lang_info]
lang = "Go"
go_version = "1.23.0"

[repo_info]
repository = "bluenviron/mediamtx"
sha = "416ac1357ea1125768a6e874f695656f510bd524"

[run_info]
docker_image = "golang:1.23.0"
volumes_to_mount = [ "{proj_path}:/app", "{host}/.m2:/.m2", "{host}/.cache/pip:/.pip_cache", "{host}/.cache/go-build:/.go_cache", "{proj_path}/_HOME_/go:/go",]
docker_wrap = "sudo docker run --rm -w /app -v {proj_path}:/app -v {host}/.m2:/.m2 -v {host}/.cache/pip:/.pip_cache -v {host}/.cache/go-build:/.go_cache -v {proj_path}/_HOME_/go:/go {img} sh -c '{cmd}'"
env = []
prebuild_command = "go mod download && go install github.com/zimmski/go-mutesting/cmd/go-mutesting@latest && go install github.com/jstemmer/go-junit-report@latest"
test_run_command = "go test -v -failfast -coverprofile=coverage.out internal/protocols/whip/ice_fragment.go internal/protocols/whip/ice_fragment_test.go 2>&1 && go tool cover -func=coverage.out"
mutation_run_command = "timeout {timeout} go-mutesting internal/protocols/whip/ice_fragment.go"
coverage_report_path = "coverage.out"
coverage_report_type = "go_cover"
mutation_report_path = "mutation_report.txt"
mutation_report_type = "go-mutesting"

[coverage]
coverage = 0
original_coverage = 75.0
mutation_kill_rate = nan
original_mutation_kill_rate = nan
covered_lines = []
missed_lines = []

[input_info]
test_file_path = "internal/protocols/whip/ice_fragment_test.go"
focal_file_path = "internal/protocols/whip/ice_fragment.go"
test_file_url = "https://github.com/bluenviron/mediamtx/blob/416ac1357ea1125768a6e874f695656f510bd524/internal/protocols/whip/ice_fragment_test.go"
focal_file_url = "https://github.com/bluenviron/mediamtx/blob/416ac1357ea1125768a6e874f695656f510bd524/internal/protocols/whip/ice_fragment.go"
first_commit_date = "2024-09-09"
last_commit_date = "2025-01-13"
test_file_content = "package whip\n\nimport (\n\t\"testing\"\n\n\t\"github.com/pion/webrtc/v3\"\n\t\"github.com/stretchr/testify/require\"\n)\n\nfunc uint16Ptr(v uint16) *uint16 {\n\treturn &v\n}\n\nfunc stringPtr(v string) *string {\n\treturn &v\n}\n\nvar iceFragmentCases = []struct {\n\tname       string\n\toffer      string\n\tcandidates []*webrtc.ICECandidateInit\n\tenc        string\n}{\n\t{\n\t\t\"a\",\n\t\t\"v=0\\n\" +\n\t\t\t\"o=- 8429658789122714282 1690995382 IN IP4 0.0.0.0\\n\" +\n\t\t\t\"s=-\\n\" +\n\t\t\t\"t=0 0\\n\" +\n\t\t\t\"a=fingerprint:sha-256 EA:05:9D:04:8F:56:41:92:3E:D5:2B:55:03:\" +\n\t\t\t\"1B:5A:2C:3D:D8:B3:FB:1B:D9:F7:1F:DA:77:0E:B9:E0:3D:B6:FF\\n\" +\n\t\t\t\"a=extmap-allow-mixed\\n\" +\n\t\t\t\"a=group:BUNDLE 0\\n\" +\n\t\t\t\"m=video 9 UDP/TLS/RTP/SAVPF 96 97 98 99 100 101 102 121 127 120 125 107 108 109 123 118 45 46 116\\n\" +\n\t\t\t\"c=IN IP4 0.0.0.0\\n\" +\n\t\t\t\"a=setup:actpass\\n\" +\n\t\t\t\"a=mid:0\\n\" +\n\t\t\t\"a=ice-ufrag:tUQMzoQAVLzlvBys\\n\" +\n\t\t\t\"a=ice-pwd:pimyGfJcjjRwvUjnmGOODSjtIxyDljQj\\n\" +\n\t\t\t\"a=rtcp-mux\\n\" +\n\t\t\t\"a=rtcp-rsize\\n\" +\n\t\t\t\"a=rtpmap:96 VP8/90000\\n\" +\n\t\t\t\"a=rtcp-fb:96 goog-remb \\n\" +\n\t\t\t\"a=rtcp-fb:96 ccm fir\\n\" +\n\t\t\t\"a=rtcp-fb:96 nack \\n\" +\n\t\t\t\"a=rtcp-fb:96 nack pli\\n\" +\n\t\t\t\"a=rtcp-fb:96 nack \\n\" +\n\t\t\t\"a=rtcp-fb:96 nack pli\\n\" +\n\t\t\t\"a=rtcp-fb:96 transport-cc \\n\" +\n\t\t\t\"a=rtpmap:97 rtx/90000\\n\" +\n\t\t\t\"a=fmtp:97 apt=96\\n\" +\n\t\t\t\"a=rtcp-fb:97 nack \\n\" +\n\t\t\t\"a=rtcp-fb:97 nack pli\\n\" +\n\t\t\t\"a=rtcp-fb:97 transport-cc \\n\" +\n\t\t\t\"a=rtpmap:98 VP9/90000\\n\" +\n\t\t\t\"a=fmtp:98 profile-id=0\\n\" +\n\t\t\t\"a=rtcp-fb:98 goog-remb \\n\" +\n\t\t\t\"a=rtcp-fb:98 ccm fir\\n\" +\n\t\t\t\"a=rtcp-fb:98 nack \\n\" +\n\t\t\t\"a=rtcp-fb:98 nack pli\\n\" +\n\t\t\t\"a=rtcp-fb:98 nack \\n\" +\n\t\t\t\"a=rtcp-fb:98 nack pli\\n\" +\n\t\t\t\"a=rtcp-fb:98 transport-cc \\n\" +\n\t\t\t\"a=rtpmap:99 rtx/90000\\n\" +\n\t\t\t\"a=fmtp:99 apt=98\\n\" +\n\t\t\t\"a=rtcp-fb:99 nack \\n\" +\n\t\t\t\"a=rtcp-fb:99 nack pli\\n\" +\n\t\t\t\"a=rtcp-fb:99 transport-cc \\n\" +\n\t\t\t\"a=rtpmap:100 VP9/90000\\n\" +\n\t\t\t\"a=fmtp:100 profile-id=1\\n\" +\n\t\t\t\"a=rtcp-fb:100 goog-remb \\n\" +\n\t\t\t\"a=rtcp-fb:100 ccm fir\\n\" +\n\t\t\t\"a=rtcp-fb:100 nack \\n\" +\n\t\t\t\"a=rtcp-fb:100 nack pli\\n\" +\n\t\t\t\"a=rtcp-fb:100 nack \\n\" +\n\t\t\t\"a=rtcp-fb:100 nack pli\\n\" +\n\t\t\t\"a=rtcp-fb:100 transport-cc \\n\" +\n\t\t\t\"a=rtpmap:101 rtx/90000\\n\" +\n\t\t\t\"a=fmtp:101 apt=100\\n\" +\n\t\t\t\"a=rtcp-fb:101 nack \\n\" +\n\t\t\t\"a=rtcp-fb:101 nack pli\\n\" +\n\t\t\t\"a=rtcp-fb:101 transport-cc \\n\" +\n\t\t\t\"a=rtpmap:102 H264/90000\\n\" +\n\t\t\t\"a=fmtp:102 level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42001f\\n\" +\n\t\t\t\"a=rtcp-fb:102 goog-remb \\n\" +\n\t\t\t\"a=rtcp-fb:102 ccm fir\\n\" +\n\t\t\t\"a=rtcp-fb:102 nack \\n\" +\n\t\t\t\"a=rtcp-fb:102 nack pli\\n\" +\n\t\t\t\"a=rtcp-fb:102 nack \\n\" +\n\t\t\t\"a=rtcp-fb:102 nack pli\\n\" +\n\t\t\t\"a=rtcp-fb:102 transport-cc \\n\" +\n\t\t\t\"a=rtpmap:121 rtx/90000\\n\" +\n\t\t\t\"a=fmtp:121 apt=102\\n\" +\n\t\t\t\"a=rtcp-fb:121 nack \\n\" +\n\t\t\t\"a=rtcp-fb:121 nack pli\\n\" +\n\t\t\t\"a=rtcp-fb:121 transport-cc \\n\" +\n\t\t\t\"a=rtpmap:127 H264/90000\\n\" +\n\t\t\t\"a=fmtp:127 level-asymmetry-allowed=1;packetization-mode=0;profile-level-id=42001f\\n\" +\n\t\t\t\"a=rtcp-fb:127 goog-remb \\n\" +\n\t\t\t\"a=rtcp-fb:127 ccm fir\\n\" +\n\t\t\t\"a=rtcp-fb:127 nack \\n\" +\n\t\t\t\"a=rtcp-fb:127 nack pli\\n\" +\n\t\t\t\"a=rtcp-fb:127 nack \\n\" +\n\t\t\t\"a=rtcp-fb:127 nack pli\\n\" +\n\t\t\t\"a=rtcp-fb:127 transport-cc \\n\" +\n\t\t\t\"a=rtpmap:120 rtx/90000\\n\" +\n\t\t\t\"a=fmtp:120 apt=127\\n\" +\n\t\t\t\"a=rtcp-fb:120 nack \\n\" +\n\t\t\t\"a=rtcp-fb:120 nack pli\\n\" +\n\t\t\t\"a=rtcp-fb:120 transport-cc \\n\" +\n\t\t\t\"a=rtpmap:125 H264/90000\\n\" +\n\t\t\t\"a=fmtp:125 level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f\\n\" +\n\t\t\t\"a=rtcp-fb:125 goog-remb \\n\" +\n\t\t\t\"a=rtcp-fb:125 ccm fir\\n\" +\n\t\t\t\"a=rtcp-fb:125 nack \\n\" +\n\t\t\t\"a=rtcp-fb:125 nack pli\\n\" +\n\t\t\t\"a=rtcp-fb:125 nack \\n\" +\n\t\t\t\"a=rtcp-fb:125 nack pli\\n\" +\n\t\t\t\"a=rtcp-fb:125 transport-cc \\n\" +\n\t\t\t\"a=rtpmap:107 rtx/90000\\n\" +\n\t\t\t\"a=fmtp:107 apt=125\\n\" +\n\t\t\t\"a=rtcp-fb:107 nack \\n\" +\n\t\t\t\"a=rtcp-fb:107 nack pli\\n\" +\n\t\t\t\"a=rtcp-fb:107 transport-cc \\n\" +\n\t\t\t\"a=rtpmap:108 H264/90000\\n\" +\n\t\t\t\"a=fmtp:108 level-asymmetry-allowed=1;packetization-mode=0;profile-level-id=42e01f\\n\" +\n\t\t\t\"a=rtcp-fb:108 goog-remb \\n\" +\n\t\t\t\"a=rtcp-fb:108 ccm fir\\n\" +\n\t\t\t\"a=rtcp-fb:108 nack \\n\" +\n\t\t\t\"a=rtcp-fb:108 nack pli\\n\" +\n\t\t\t\"a=rtcp-fb:108 nack \\n\" +\n\t\t\t\"a=rtcp-fb:108 nack pli\\n\" +\n\t\t\t\"a=rtcp-fb:108 transport-cc \\n\" +\n\t\t\t\"a=rtpmap:109 rtx/90000\\n\" +\n\t\t\t\"a=fmtp:109 apt=108\\n\" +\n\t\t\t\"a=rtcp-fb:109 nack \\n\" +\n\t\t\t\"a=rtcp-fb:109 nack pli\\n\" +\n\t\t\t\"a=rtcp-fb:109 transport-cc \\n\" +\n\t\t\t\"a=rtpmap:123 H264/90000\\n\" +\n\t\t\t\"a=fmtp:123 level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=640032\\n\" +\n\t\t\t\"a=rtcp-fb:123 goog-remb \\n\" +\n\t\t\t\"a=rtcp-fb:123 ccm fir\\n\" +\n\t\t\t\"a=rtcp-fb:123 nack \\n\" +\n\t\t\t\"a=rtcp-fb:123 nack pli\\n\" +\n\t\t\t\"a=rtcp-fb:123 nack \\n\" +\n\t\t\t\"a=rtcp-fb:123 nack pli\\n\" +\n\t\t\t\"a=rtcp-fb:123 transport-cc \\n\" +\n\t\t\t\"a=rtpmap:118 rtx/90000\\n\" +\n\t\t\t\"a=fmtp:118 apt=123\\n\" +\n\t\t\t\"a=rtcp-fb:118 nack \\n\" +\n\t\t\t\"a=rtcp-fb:118 nack pli\\n\" +\n\t\t\t\"a=rtcp-fb:118 transport-cc \\n\" +\n\t\t\t\"a=rtpmap:45 AV1/90000\\n\" +\n\t\t\t\"a=rtcp-fb:45 goog-remb \\n\" +\n\t\t\t\"a=rtcp-fb:45 ccm fir\\n\" +\n\t\t\t\"a=rtcp-fb:45 nack \\n\" +\n\t\t\t\"a=rtcp-fb:45 nack pli\\n\" +\n\t\t\t\"a=rtcp-fb:45 nack \\n\" +\n\t\t\t\"a=rtcp-fb:45 nack pli\\n\" +\n\t\t\t\"a=rtcp-fb:45 transport-cc \\n\" +\n\t\t\t\"a=rtpmap:46 rtx/90000\\n\" +\n\t\t\t\"a=fmtp:46 apt=45\\n\" +\n\t\t\t\"a=rtcp-fb:46 nack \\n\" +\n\t\t\t\"a=rtcp-fb:46 nack pli\\n\" +\n\t\t\t\"a=rtcp-fb:46 transport-cc \\n\" +\n\t\t\t\"a=rtpmap:116 ulpfec/90000\\n\" +\n\t\t\t\"a=rtcp-fb:116 nack \\n\" +\n\t\t\t\"a=rtcp-fb:116 nack pli\\n\" +\n\t\t\t\"a=rtcp-fb:116 transport-cc \\n\" +\n\t\t\t\"a=extmap:1 http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\\n\" +\n\t\t\t\"a=ssrc:3421396091 cname:BmFVQDtOlcBwXZCl\\n\" +\n\t\t\t\"a=ssrc:3421396091 msid:BmFVQDtOlcBwXZCl CLgunVCazXXKLyEx\\n\" +\n\t\t\t\"a=ssrc:3421396091 mslabel:BmFVQDtOlcBwXZCl\\n\" +\n\t\t\t\"a=ssrc:3421396091 label:CLgunVCazXXKLyEx\\n\" +\n\t\t\t\"a=msid:BmFVQDtOlcBwXZCl CLgunVCazXXKLyEx\\n\" +\n\t\t\t\"a=sendrecv\\n\",\n\t\t[]*webrtc.ICECandidateInit{{\n\t\t\tCandidate:     \"3628911098 1 udp 2130706431 192.168.3.218 49462 typ host\",\n\t\t\tSDPMid:        stringPtr(\"0\"),\n\t\t\tSDPMLineIndex: uint16Ptr(0),\n\t\t}},\n\t\t\"a=ice-ufrag:tUQMzoQAVLzlvBys\\r\\n\" +\n\t\t\t\"a=ice-pwd:pimyGfJcjjRwvUjnmGOODSjtIxyDljQj\\r\\n\" +\n\t\t\t\"m=video 9 UDP/TLS/RTP/SAVPF 96 97 98 99 100 101 102 121 127 120 125 107 108 109 123 118 45 46 116\\r\\n\" +\n\t\t\t\"a=mid:0\\r\\n\" +\n\t\t\t\"a=candidate:3628911098 1 udp 2130706431 192.168.3.218 49462 typ host\\r\\n\",\n\t},\n}\n\nfunc TestICEFragmentUnmarshal(t *testing.T) {\n\tfor _, ca := range iceFragmentCases {\n\t\tt.Run(ca.name, func(t *testing.T) {\n\t\t\tcandidates, err := ICEFragmentUnmarshal([]byte(ca.enc))\n\t\t\trequire.NoError(t, err)\n\t\t\trequire.Equal(t, ca.candidates, candidates)\n\t\t})\n\t}\n}\n\nfunc TestICEFragmentMarshal(t *testing.T) {\n\tfor _, ca := range iceFragmentCases {\n\t\tt.Run(ca.name, func(t *testing.T) {\n\t\t\tbyts, err := ICEFragmentMarshal(ca.offer, ca.candidates)\n\t\t\trequire.NoError(t, err)\n\t\t\trequire.Equal(t, ca.enc, string(byts))\n\t\t})\n\t}\n}"
